{"version":3,"file":"js/643.9e435740.js","mappings":"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","sources":["webpack://erabbit-pc-vue-project/./src/views/category/components/goods-item.vue","webpack://erabbit-pc-vue-project/./src/views/category/components/goods-item.vue?729e","webpack://erabbit-pc-vue-project/./src/views/category/sub.vue","webpack://erabbit-pc-vue-project/./src/views/category/components/sub-bread.vue","webpack://erabbit-pc-vue-project/./src/views/category/components/sub-bread.vue?6f1c","webpack://erabbit-pc-vue-project/./src/views/category/components/sub-filter.vue","webpack://erabbit-pc-vue-project/./src/views/category/components/sub-filter.vue?8f5b","webpack://erabbit-pc-vue-project/./src/views/category/components/sub-sort.vue","webpack://erabbit-pc-vue-project/./src/views/category/components/sub-sort.vue?1654","webpack://erabbit-pc-vue-project/./src/views/category/sub.vue?7bf5"],"sourcesContent":["<template>\r\n  <RouterLink :to=\"`/product/${goods.id}`\" class='goods-item'>\r\n    <img v-lazy=\"goods.picture\" alt=\"\">\r\n    <p class=\"name ellipsis\">{{goods.name}}</p>\r\n    <p class=\"desc ellipsis\">{{goods.desc}}</p>\r\n    <p class=\"price\">&yen;{{goods.price}}</p>\r\n  </RouterLink>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'GoodsItem',\r\n  props: {\r\n    goods: {\r\n      type: Object,\r\n      default: () => { }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang='less'>\r\n.goods-item {\r\n  display: block;\r\n  width: 220px;\r\n  padding: 20px 30px;\r\n  text-align: center;\r\n  .hoverShadow();\r\n  img {\r\n    width: 160px;\r\n    height: 160px;\r\n  }\r\n  p {\r\n    padding-top: 10px;\r\n  }\r\n  .name {\r\n    font-size: 16px;\r\n  }\r\n  .desc {\r\n    color: #999;\r\n    height: 29px;\r\n  }\r\n  .price {\r\n    color: @priceColor;\r\n    font-size: 20px;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./goods-item.vue?vue&type=template&id=26802fc2&scoped=true\"\nimport script from \"./goods-item.vue?vue&type=script&lang=js\"\nexport * from \"./goods-item.vue?vue&type=script&lang=js\"\n\nimport \"./goods-item.vue?vue&type=style&index=0&id=26802fc2&scoped=true&lang=less\"\n\nimport exportComponent from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\erabbit-pc-vue-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-26802fc2\"]])\n\nexport default __exports__","<template>\r\n  <div class='sub-category'>\r\n    <div class=\"container\">\r\n      <!-- 面包屑 -->\r\n      <SubBread />\r\n      <!-- 商品筛选区 -->\r\n      <SubFilter @filter-change=\"changeFilter\" />\r\n     <!-- 结果区域 -->\r\n     <div class=\"goods-list\">\r\n        <!-- 排序 -->\r\n        <SubSort @sort-change=\"changeSort\"/>\r\n        <!-- <SubSort @sort-change=\"changesort\" /> -->\r\n        <!-- 列表 -->\r\n        <ul>\r\n          <li v-for=\"goods in goodsList\" :key=\"goods.id\" >\r\n            <GoodsItem :goods=\"goods\" />\r\n          </li>\r\n        </ul>\r\n        <!-- 加载 -->\r\n        <XtxInfiniteLoading :loading=\"loading\" :finished=\"finished\" @infinite=\"getData\"></XtxInfiniteLoading>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SubBread from './components/sub-bread'\r\nimport SubFilter from './components/sub-filter'\r\nimport SubSort from './components/sub-sort'\r\nimport GoodsItem from './components/goods-item'\r\nimport { ref, watch } from 'vue'\r\nimport { findSubCategoryGoods } from '@/api/category'\r\nimport { useRoute } from 'vue-router'\r\nexport default {\r\n  name: 'SubCategory',\r\n  components: { SubBread, SubFilter, SubSort, GoodsItem },\r\n  setup () {\r\n    // 1. 基础布局\r\n    // 2. 无限加载组件\r\n    // 3. 动态加载数据且渲染\r\n    // 4. 任何筛选条件变化需要更新列表\r\n    const route = useRoute()\r\n\r\n    // 定义数据状态 和 数据类型\r\n    const loading = ref(false)\r\n    const finished = ref(false)\r\n    const goodsList = ref([])\r\n    // 定义 api查询参数\r\n    let reqParams = {\r\n      page: 1, // 页码\r\n      pageSize: 20 // 每页/条数据\r\n    }\r\n    // 获取数据函数\r\n    const getData = () => {\r\n      console.log('触发了吗')\r\n      loading.value = true\r\n      reqParams.categoryId = route.params.id // 往 api查询参数 里面添加id\r\n      findSubCategoryGoods(reqParams).then(({ result }) => {\r\n        if (result.items.length) {\r\n          goodsList.value.push(...result.items)\r\n          reqParams.page++ // 页码加1\r\n        } else {\r\n          // 没有数据可以加载了\r\n          finished.value = true\r\n        }\r\n        loading.value = false\r\n      })\r\n    }\r\n    // 切换二级类目,初始化数据模板.重新获取数据\r\n    watch(() => route.params.id, (newVal) => {\r\n      if (newVal && route.path === `/category/sub/${newVal}`) {\r\n        // loading.value = false\r\n        goodsList.value = []\r\n        reqParams = {\r\n          page: 1, // 页码\r\n          pageSize: 20 // 每页/条数据\r\n        }\r\n        finished.value = false\r\n      }\r\n    }\r\n    )\r\n\r\n    // 监听筛选区改变\r\n    const changeFilter = (filterParams) => {\r\n      reqParams = { ...reqParams, ...filterParams } // 合并参数\r\n      console.log('filterParams', filterParams)\r\n\r\n      // 初始化数据模板\r\n      reqParams.page = 1\r\n      goodsList.value = []\r\n      finished.value = false\r\n    }\r\n    // 监听排序改变\r\n    const changeSort = (sortParams) => {\r\n      reqParams = { ...reqParams, ...sortParams } // 合并参数\r\n      // 初始化数据模板\r\n      reqParams.page = 1\r\n      goodsList.value = []\r\n      finished.value = false\r\n    }\r\n    return { loading, finished, goodsList, getData, changeFilter, changeSort }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang='less'>\r\n.goods-list {\r\n  background: #fff;\r\n  padding: 0 25px;\r\n  margin-top: 25px;\r\n  ul {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    padding: 0 5px;\r\n    li {\r\n      margin-right: 20px;\r\n      margin-bottom: 20px;\r\n      &:nth-child(5n) {\r\n        margin-right: 0;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <XtxBread>\r\n    <XtxBreadItem to=\"/\">首页</XtxBreadItem>\r\n    <XtxBreadItem v-if=\"category.top\" :to=\"`/category/${category.top.id}`\">{{category.top.name}}</XtxBreadItem>\r\n    <Transition name=\"fade-right\" mode=\"out-in\">\r\n      <XtxBreadItem v-if=\"category.sub\" :key=\"category.sub.id\">{{category.sub.name}}</XtxBreadItem>\r\n    </Transition>\r\n  </XtxBread>\r\n</template>\r\n<script>\r\nimport { useStore } from 'vuex'\r\nimport { useRoute } from 'vue-router'\r\nimport { computed } from 'vue'\r\nexport default {\r\n  name: 'SubBread',\r\n  setup () {\r\n    // 注意：setup中this不是当前vue实例\r\n\r\n    // 1. 获取二级分类的ID，在地址在路由中\r\n    // route ===> this.$route\r\n    const route = useRoute()\r\n    console.log('route.params.id', route.params.id)\r\n    // 2. 获取vuex中的类目数据\r\n    // store ===> this.$store\r\n    const store = useStore()\r\n    console.log('store', store)\r\n    // 3. 通过计算属性得到，二级类目的名称和ID，一级类目的名称和ID\r\n    const category = computed(() => {\r\n      const obj = {}\r\n      store.state.category.list.forEach(top => {\r\n        top.children && top.children.forEach(sub => {\r\n          if (sub.id === route.params.id) {\r\n            // 设置二级类目\r\n            obj.sub = { id: sub.id, name: sub.name }\r\n            // 设置一级类目\r\n            obj.top = { id: top.id, name: top.name }\r\n          }\r\n        })\r\n      })\r\n      return obj\r\n    })\r\n\r\n    // 模版需要使用的东西需要setup返回\r\n    return { category }\r\n  }\r\n}\r\n</script>\r\n<style scoped lang=\"less\"></style>\r\n","import { render } from \"./sub-bread.vue?vue&type=template&id=f6fc7e8c\"\nimport script from \"./sub-bread.vue?vue&type=script&lang=js\"\nexport * from \"./sub-bread.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\erabbit-pc-vue-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n<!-- 筛选区 -->\r\n   <div class=\"sub-filter\" v-if=\"filterData && !filterLoading\">\r\n     <div class=\"item\" >\r\n       <div class=\"head\">品牌：</div>\r\n       <div class=\"body\">\r\n         <!-- <a href=\"javascript:;\">全部</a> -->\r\n         <a  @click=\"changeBrand(brand.id)\"\r\n         :class=\"{active: filterData.selectedBrand === brand.id}\" href=\"javascript:;\" v-for=\"brand in filterData.brands\" :key=\"brand.id\">{{brand.name}}</a>\r\n       </div>\r\n     </div>\r\n\r\n     <div class=\"item\" v-for=\"p in filterData.saleProperties\" :key=\"p\">\r\n       <div class=\"head\">{{p.name}}：</div>\r\n       <div class=\"body\">\r\n         <!-- <a href=\"javascript:;\">全部</a> -->\r\n         <a\r\n         @click=\"changeAttr(p,attr.id)\"\r\n         :class=\"{active: p.selectedProp === attr.id}\"\r\n         v-for=\"attr in p.properties\" :key=\"attr.id\"\r\n         href=\"javascript:;\"\r\n         >\r\n            {{attr.name}}\r\n         </a>\r\n       </div>\r\n     </div>\r\n   </div>\r\n   <!-- 骨架样式 -->\r\n   <div v-else class=\"sub-filter\">\r\n    <XtxSkeleton class=\"item\" width=\"800px\" height=\"40px\"  />\r\n    <XtxSkeleton class=\"item\" width=\"800px\" height=\"40px\"  />\r\n    <XtxSkeleton class=\"item\" width=\"600px\" height=\"40px\"  />\r\n    <XtxSkeleton class=\"item\" width=\"600px\" height=\"40px\"  />\r\n    <XtxSkeleton class=\"item\" width=\"600px\" height=\"40px\"  />\r\n  </div>\r\n</template>\r\n<script>\r\nimport { findSubCategoryFilter } from '@/api/category' // 获取二级分类筛选条件数据\r\nimport { useRoute } from 'vue-router'\r\n// import { useStore } from 'vuex'\r\nimport { ref, watch } from 'vue'\r\nexport default {\r\n  name: 'SubFilter',\r\n  setup (props, { emit }) {\r\n    // 1.获取数据\r\n    // 2.数据中需要全部选中,需要预览当前点击激活功能,默认选中 全选\r\n    // 3.完成渲染\r\n    const route = useRoute()\r\n    const filterData = ref(null)\r\n    const filterLoading = ref(false)\r\n    // 4.分类发生变化时,需要重新获取筛选数据,需要使用侦听器\r\n    watch(() => route.params.id, (newVal, oldVal) => {\r\n      // 当你从二级类目去顶级类目时 也会拿到id,不能加载数据因为他不是二级类目\r\n      if (newVal && `/category/sub/${newVal}` === route.path) {\r\n        filterLoading.value = true\r\n        // 发请求,获取数据, 从.then拿到的数据中解构出  result\r\n        newVal && findSubCategoryFilter(route.params.id).then(({ result }) => {\r\n          console.log(result)\r\n          // 品牌全部\r\n          result.selectedBrand = null // 自定义添加的默认选中属性\r\n          result.brands.unshift({ id: null, name: '全部' })\r\n          console.log(result.brands)\r\n          // 销售属性全部\r\n          result.saleProperties.forEach(p => {\r\n            p.selectedProp = null // 自定义添加的默认选中属性\r\n            p.properties.unshift({ id: null, name: '全部' })\r\n          })\r\n          filterData.value = result // 赋值渲染数据数组\r\n          filterLoading.value = false\r\n        })\r\n      }\r\n    }, { immediate: true })\r\n\r\n    // 获取筛选参数\r\n    const getFilterParams = () => {\r\n      const filterParams = {}\r\n      const attrs = []\r\n      filterParams.brandId = filterData.value.selectedBrand\r\n      filterData.value.saleProperties.forEach(p => {\r\n        const attr = p.properties.find(attr => attr.id === p.selectedProp)\r\n        if (attr && attr.id !== null) {\r\n          attrs.push({ groupName: p.name, propertyName: attr.name })\r\n        }\r\n      })\r\n      if (attrs.length) filterParams.attrs = attrs\r\n      console.log('filterParams', filterParams) // 打印筛选参数\r\n\r\n      return filterParams\r\n    }\r\n    // 选择品牌\r\n    const changeBrand = (brandId) => {\r\n      if (filterData.value.selectedBrand === brandId) return\r\n      filterData.value.selectedBrand = brandId\r\n      emit('filter-change', getFilterParams())\r\n    }\r\n    // 选中属性\r\n    const changeAttr = (p, attrId) => {\r\n      if (p.selectedProp === attrId) return\r\n      p.selectedProp = attrId\r\n      emit('filter-change', getFilterParams())\r\n    }\r\n    return { filterData, filterLoading, changeBrand, changeAttr }\r\n  }\r\n}\r\n</script>\r\n<style scoped lang='less'>\r\n  // 筛选区\r\n  .sub-filter {\r\n    background: #fff;\r\n    padding: 25px;\r\n    .item {\r\n      display: flex;\r\n      line-height: 40px;\r\n      .head {\r\n        width: 80px;\r\n        color: #999;\r\n      }\r\n      .body {\r\n        flex: 1;\r\n        a {\r\n          margin-right: 36px;\r\n          transition: all .3s;\r\n          display: inline-block;\r\n          &.active,\r\n          &:hover {\r\n            color: @xtxColor;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  // 骨架样式\r\n  .xtx-skeleton {\r\n      padding: 10px 0;\r\n    }\r\n</style>\r\n","import { render } from \"./sub-filter.vue?vue&type=template&id=b7f00628&scoped=true\"\nimport script from \"./sub-filter.vue?vue&type=script&lang=js\"\nexport * from \"./sub-filter.vue?vue&type=script&lang=js\"\n\nimport \"./sub-filter.vue?vue&type=style&index=0&id=b7f00628&scoped=true&lang=less\"\n\nimport exportComponent from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\erabbit-pc-vue-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b7f00628\"]])\n\nexport default __exports__","<template>\r\n  <div class='sub-sort'>\r\n    <div class=\"sort\">\r\n      <a :class=\"{active: sortParams.sortParams=== null}\" @click=\"changeSort(null)\" href=\"javascript:;\">默认排序</a>\r\n      <a :class=\"{active: sortParams.sortParams=== 'publishTime'}\" @click=\"changeSort('publishTime')\" href=\"javascript:;\">最新商品</a>\r\n      <a :class=\"{active: sortParams.sortParams=== 'orderNum'}\" @click=\"changeSort('orderNum')\" href=\"javascript:;\">最高人气</a>\r\n      <a :class=\"{active: sortParams.sortParams=== 'evaluateNum'}\" @click=\"changeSort('evaluateNum')\" href=\"javascript:;\">评论最多</a>\r\n      <a @click=\"changeSort('price')\" href=\"javascript:;\">\r\n        价格排序\r\n        <i class=\"arrow up\" :class=\"{active: sortParams.sortMethod === 'asc'&& sortParams.sortParams ==='price'}\"  />\r\n        <i class=\"arrow down\" :class=\"{active: sortParams.sortMethod === 'desc'&& sortParams.sortParams ==='price'}\" />\r\n      </a>\r\n    </div>\r\n    <div class=\"check\">\r\n      <XtxCheckbox @change=\"changeCheck\" v-model=\"sortParams.onlyDiscount\">仅显示有货商品</XtxCheckbox>\r\n      <XtxCheckbox @change=\"changeCheck\" v-model=\"sortParams.inventory\">仅显示特惠商品</XtxCheckbox>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { reactive } from 'vue'\r\nexport default {\r\n  name: 'SubSort',\r\n  setup (props, { emit }) {\r\n    // 1. 根据后台需要的参数定义数据对象\r\n    // 2. 根据数据对象，绑定组件（复选框，排序按钮）\r\n    // 3. 在操作排序组件的时候，需要反馈给数据对象\r\n    // sortField====>publishTime,orderNum,price,evaluateNum\r\n    // sortMethod====>asc为正序 desc为倒序\r\n    // 定义数据\r\n    const sortParams = reactive({\r\n      inventory: false, // 有库存\r\n      onlyDiscount: false, // 有折扣\r\n      sortParams: null, // 排序参数 publishTime,orderNum,price,evaluateNum\r\n      sortMethod: null // 排序方法 desc:倒序(默认排序) asc:正序\r\n    })\r\n    // 改变排序\r\n    const changeSort = (sortField) => { // sortField 排序种类\r\n      if (sortField === 'price') {\r\n        sortParams.sortParams = sortField // 更新当前 排序种类\r\n        // 设置 默认排序为 desc为倒序\r\n        if (sortParams.sortMethod === null) { // 第一次点击前为 null\r\n          sortParams.sortMethod = 'desc'\r\n        } else { // 非第一次点击的情况\r\n          sortParams.sortMethod = sortParams.sortMethod === 'desc' ? 'asc' : 'desc'\r\n        }\r\n      } else {\r\n        if (sortParams.sortParams === sortField) return // 阻止重复点击当前选中的标签\r\n        sortParams.sortParams = sortField\r\n        sortParams.sortMethod = null // 当点击非 price 标签时,重置 排序方式为 null\r\n      }\r\n      // 提交父组件\r\n      emit('sort-change', sortParams)\r\n      console.log('sortParams', sortParams)\r\n    }\r\n    // 提交父组件\r\n    const changeCheck = (sortField) => {\r\n      emit('sort-change', sortParams)\r\n      console.log('sortParams', sortParams)\r\n    }\r\n    return { sortParams, changeSort, changeCheck }\r\n  }\r\n}\r\n</script>\r\n<style scoped lang='less'>\r\n.sub-sort {\r\n  height: 80px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  .sort {\r\n    display: flex;\r\n    a {\r\n      height: 30px;\r\n      line-height: 28px;\r\n      border: 1px solid #e4e4e4;\r\n      padding: 0 20px;\r\n      margin-right: 20px;\r\n      color: #999;\r\n      border-radius: 2px;\r\n      position: relative;\r\n      transition: all .3s;\r\n      &.active {\r\n        background: @xtxColor;\r\n        border-color: @xtxColor;\r\n        color: #fff;\r\n      }\r\n      .arrow {\r\n        position: absolute;\r\n        border: 5px solid transparent;\r\n        right: 8px;\r\n        &.up {\r\n          top: 3px;\r\n          border-bottom-color: #bbb;\r\n            &.active {\r\n            border-bottom-color: @xtxColor;\r\n          }\r\n        }\r\n        &.down {\r\n          top: 15px;\r\n          border-top-color: #bbb;\r\n          &.active {\r\n            border-top-color: @xtxColor;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .check {\r\n    .xtx-checkbox {\r\n      margin-left: 20px;\r\n      color: #999;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./sub-sort.vue?vue&type=template&id=0f8f159e&scoped=true\"\nimport script from \"./sub-sort.vue?vue&type=script&lang=js\"\nexport * from \"./sub-sort.vue?vue&type=script&lang=js\"\n\nimport \"./sub-sort.vue?vue&type=style&index=0&id=0f8f159e&scoped=true&lang=less\"\n\nimport exportComponent from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\erabbit-pc-vue-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0f8f159e\"]])\n\nexport default __exports__","import { render } from \"./sub.vue?vue&type=template&id=7c241d64&scoped=true\"\nimport script from \"./sub.vue?vue&type=script&lang=js\"\nexport * from \"./sub.vue?vue&type=script&lang=js\"\n\nimport \"./sub.vue?vue&type=style&index=0&id=7c241d64&scoped=true&lang=less\"\n\nimport exportComponent from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\erabbit-pc-vue-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7c241d64\"]])\n\nexport default __exports__"],"names":["alt","class","_createBlock","_component_RouterLink","to","$props","id","_createElementVNode","_hoisted_1","picture","_hoisted_2","name","_hoisted_3","desc","_hoisted_4","price","props","goods","type","Object","default","__exports__","render","_createElementBlock","_createVNode","_component_SubBread","_component_SubFilter","onFilterChange","$setup","_component_SubSort","onSortChange","_Fragment","key","_component_GoodsItem","_component_XtxInfiniteLoading","loading","finished","onInfinite","_component_XtxBread","_component_XtxBreadItem","top","_Transition","mode","sub","setup","route","useRoute","console","log","params","store","useStore","category","computed","obj","state","list","forEach","children","brands","brand","onClick","active","selectedBrand","href","saleProperties","p","_hoisted_6","_hoisted_7","properties","attr","selectedProp","_hoisted_9","_component_XtxSkeleton","width","height","emit","filterData","ref","filterLoading","watch","newVal","oldVal","path","value","findSubCategoryFilter","then","result","unshift","immediate","getFilterParams","filterParams","attrs","brandId","find","push","groupName","propertyName","length","changeBrand","changeAttr","attrId","sortParams","sortMethod","_component_XtxCheckbox","onChange","onlyDiscount","inventory","reactive","changeSort","sortField","changeCheck","components","SubBread","SubFilter","SubSort","GoodsItem","goodsList","reqParams","page","pageSize","getData","categoryId","findSubCategoryGoods","items","changeFilter"],"sourceRoot":""}