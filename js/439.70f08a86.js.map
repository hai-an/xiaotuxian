{"version":3,"file":"js/439.70f08a86.js","mappings":"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","sources":["webpack://erabbit-pc-vue-project/./src/views/login/index.vue","webpack://erabbit-pc-vue-project/./src/views/login/components/login-form.vue","webpack://erabbit-pc-vue-project/./src/views/login/components/login-form.vue?c986","webpack://erabbit-pc-vue-project/./src/views/login/index.vue?b794"],"sourcesContent":["<template>\r\n  <!-- 头部 -->\r\n  <LoginHeader>欢迎登录</LoginHeader>\r\n  <!-- 主体 -->\r\n  <section class=\"login-section\">\r\n    <div class=\"wrapper\">\r\n      <nav>\r\n        <a @click=\"activeName = 'account'\" :class=\"{active:activeName==='account'}\"\r\n          href=\"javascript:;\">账户登录</a>\r\n        <a @click=\"activeName = 'qrcode'\" :class=\"{ active: activeName === 'qrcode' }\"\r\n          href=\"javascript:;\">扫码登录</a>\r\n      </nav>\r\n      <!-- 表单 -->\r\n      <!-- <div v-if=\"activeName==='account'\" class=\"account-box\">表单</div> -->\r\n      <LoginForm v-if=\"activeName === 'account'\"></LoginForm>\r\n      <!-- 二维码 -->\r\n      <div v-if=\"activeName === 'qrcode'\" class=\"qrcode-box\">\r\n        <img src=\"@/assets/images/qrcode.jpg\" alt=\"\">\r\n        <!-- <span id=\"qqLoginBtn\"></span> -->\r\n        <p>打开 <a href=\"javascript:;\">小兔鲜App</a> 扫码登录</p>\r\n      </div>\r\n    </div>\r\n  </section>\r\n  <!-- 底部 -->\r\n  <LoginFooter />\r\n</template>\r\n<script>\r\nimport LoginHeader from './components/login-header'\r\nimport LoginFooter from './components/login-footer'\r\nimport LoginForm from './components/login-form'\r\nimport { ref } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRoute } from 'vue-router'\r\nexport default {\r\n  name: 'PageLogin',\r\n  components: {\r\n    LoginHeader,\r\n    LoginFooter,\r\n    LoginForm\r\n  },\r\n  setup () {\r\n    const activeName = ref('account')\r\n    // 存储回调地址，提供将来QQ回调页使用  setup中\r\n    const store = useStore()\r\n    const route = useRoute()\r\n    store.commit('user/setRedirectUrl', route.query.redirectUrl)\r\n    return { activeName }\r\n  }\r\n}\r\n</script>\r\n<style scoped lang=\"less\">\r\n.login-section {\r\n  background: url(../../assets/images/login-bg.png) no-repeat center / cover;\r\n  height: 488px;\r\n  position: relative;\r\n\r\n  .wrapper {\r\n    width: 380px;\r\n    background: #fff;\r\n    min-height: 400px;\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 54px;\r\n    transform: translate3d(100px, 0, 0);\r\n    box-shadow: 0 0 10px rgba(0, 0, 0, .15);\r\n\r\n    nav {\r\n      height: 55px;\r\n      border-bottom: 1px solid #f5f5f5;\r\n      display: flex;\r\n      padding: 0 40px;\r\n      text-align: right;\r\n      align-items: center;\r\n\r\n      a {\r\n        flex: 1;\r\n        line-height: 1;\r\n        display: inline-block;\r\n        font-size: 18px;\r\n        position: relative;\r\n\r\n        &:first-child {\r\n          border-right: 1px solid #f5f5f5;\r\n          text-align: left;\r\n        }\r\n\r\n        &.active {\r\n          color: @xtxColor;\r\n          font-weight: bold;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// 二维码容器\r\n.qrcode-box {\r\n  text-align: center;\r\n  padding-top: 40px;\r\n\r\n  p {\r\n    margin-top: 20px;\r\n\r\n    a {\r\n      color: @xtxColor;\r\n      font-size: 16px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"account-box\">\r\n    <div class=\"toggle\">\r\n      <a @click=\"isMsgLogin=false\" href=\"javascript:;\" v-if=\"isMsgLogin\">\r\n        <i class=\"iconfont icon-user\"></i> 使用账号登录\r\n      </a>\r\n      <a @click=\"isMsgLogin=true\" href=\"javascript:;\" v-else>\r\n        <i class=\"iconfont icon-msg\"></i> 使用短信登录\r\n      </a>\r\n    </div>\r\n    <!-- <div class=\"form\"> -->\r\n    <Form ref=\"formData\"  class=\"form\" v-slot=\"{errors}\" :validation-schema=\"schema\" autocomplete=\"off\">\r\n      <!-- 使用账号登录 -->\r\n      <template v-if=\"!isMsgLogin\">\r\n        <div class=\"form-item\">\r\n          <div class=\"input\">\r\n            <i class=\"iconfont icon-user\"></i>\r\n            <Field :class=\"{error:errors.account}\" v-model=\"form.account\" name=\"account\" type=\"text\"  placeholder=\"请输入用户名或手机号\" />\r\n          </div>\r\n          <div v-if=\"errors.account\" class=\"error\"><i class=\"iconfont icon-warning\" />{{errors.account}}</div>\r\n        </div>\r\n        <div class=\"form-item\">\r\n          <div class=\"input\">\r\n            <i class=\"iconfont icon-lock\"></i>\r\n            <Field :class=\"{error:errors.password}\" name=\"password\" v-model=\"form.password\" type=\"password\" placeholder=\"请输入密码\" />\r\n          </div>\r\n          <div v-if=\"errors.password\" class=\"error\"><i class=\"iconfont icon-warning\" />{{errors.password}}</div>\r\n        </div>\r\n      </template>\r\n      <!-- 使用短信登录 -->\r\n      <template v-else>\r\n        <div class=\"form-item\">\r\n          <div class=\"input\">\r\n            <i class=\"iconfont icon-user\"></i>\r\n            <Field :class=\"{error:errors.mobile}\" name=\"mobile\" v-model=\"form.mobile\" type=\"text\" placeholder=\"请输入手机号\" />\r\n          </div>\r\n          <div v-if=\"errors.mobile\" class=\"error\"><i class=\"iconfont icon-warning\" />{{errors.mobile}}</div>\r\n        </div>\r\n        <div class=\"form-item\">\r\n          <div class=\"input\">\r\n            <i class=\"iconfont icon-code\"></i>\r\n            <Field :class=\"{error:errors.code}\" name=\"code\" v-model=\"form.code\" type=\"text\" placeholder=\"请输入验证码\" />\r\n            <span @click=\"send()\" class=\"code\">{{time===0?'发送验证码':`${time}秒后点击`}}</span>\r\n          </div>\r\n          <div v-if=\"errors.code\" class=\"error\"><i class=\"iconfont icon-warning\" />{{errors.code}}</div>\r\n        </div>\r\n      </template>\r\n      <!-- Field 的 as 属性可以指定为其他标签，也可指定为组件。 -->\r\n      <!-- 但是组件需要支持 v-model 否则校验不会触发。 -->\r\n      <div class=\"form-item\">\r\n        <div class=\"agree\">\r\n          <!-- <XtxCheckbox v-model=\"form.isAgree\" /> -->\r\n          <Field as=\"XtxCheckbox\" name=\"isAgree\" v-model=\"form.isAgree\"/>\r\n          <span>我已同意</span>\r\n          <a href=\"javascript:;\">《隐私条款》</a>\r\n          <span>和</span>\r\n          <a href=\"javascript:;\">《服务条款》</a>\r\n        </div>\r\n      </div>\r\n      <a @click=\"login()\" href=\"javascript:;\" class=\"btn\">登录</a>\r\n    <!-- </div> -->\r\n    </Form>\r\n    <div class=\"action\">\r\n      <!-- <span id=\"qqLoginBtn\"></span> -->\r\n      <a href=\"https://graph.qq.com/oauth2.0/authorize?client_id=100556005&response_type=token&scope=all&redirect_uri=http%3A%2F%2Fwww.corho.com%3A8080%2F%23%2Flogin%2Fcallback\">\r\n        <img src=\"https://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/Connect_logo_7.png\" alt=\"\">\r\n      </a>\r\n      <!-- <a href=\"https://graph.qq.com/oauth2.0/authorize?client_id=101941968&response_type=token&scope=all&redirect_uri=http%3A%2F%2Ferabbit.itheima.net%2F%23%2Flogin%2Fcallback\">\r\n        <img src=\"https://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/Connect_logo_7.png\" alt=\"\">\r\n      </a> -->\r\n      <div class=\"url\">\r\n        <a href=\"javascript:;\">忘记密码</a>\r\n        <a href=\"javascript:;\">免费注册</a>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { onMounted, reactive, ref, watch } from 'vue'\r\nimport { userMobileLoginMsg, userAccountLogin, userMobileLogin } from '@/api/user'\r\nimport { Form, Field } from 'vee-validate' // 官方插件\r\nimport schema from '@/utils/vee-validate-schema'\r\n// import QC from 'qc'\r\n\r\nimport Message from '@/components/library/Message'\r\nimport { useStore } from 'vuex'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { useIntervalFn } from '@vueuse/core'\r\nexport default {\r\n  name: 'LoginForm',\r\n  components: { Form, Field },\r\n  setup () {\r\n  //   onMounted(() => {\r\n  //     // 组件渲染完毕，使用QC生成QQ登录按钮\r\n  //     QC.Login({\r\n  //       btnId: 'qqLoginBtn'\r\n  //     })\r\n  //   })\r\n    // 是否短信登录\r\n    const isMsgLogin = ref(false)\r\n    // 表单对象数据\r\n    const form = reactive({\r\n      isAgree: true,\r\n      account: null,\r\n      password: null,\r\n      mobile: null,\r\n      code: null\r\n    })\r\n\r\n    // vee-validate 校验基本步骤\r\n    //  1.导入Form Field 组件 将form和input 进行替换,需要加上name用来指定将来的校验规则函数的\r\n    //  2. Field 需要进行数据绑定,字段名称最好和后台接口需要的一致\r\n    //  3.定义Field的name属性指定的校验规则函数, Form的validation-schema接受定义好的校验规则是对象\r\n\r\n    // 校验规则对象\r\n    const mySchema = {\r\n      // 校验规则 返回 true就是成功, 返回 字符串就是校验失败 ,字符串是错误提示\r\n      account: schema.account,\r\n      password: schema.password,\r\n      mobile: schema.mobile,\r\n      code: schema.code,\r\n      isAgree: schema.isAgree\r\n    }\r\n\r\n    // 监听 isMsgLogin 是否短信登录\r\n    // 在切换 短信 与 账户 登录时候清空表单和校验结果\r\n    const formData = ref(null)\r\n    watch(isMsgLogin, async () => {\r\n      // 切换表单元素，还原数据和清除校验效果\r\n      form.isAgree = true\r\n      form.account = null\r\n      form.password = null\r\n      form.mobile = null\r\n      form.code = null\r\n      formData.value.resetForm() // 校验效果清除，Form组件提供resetForm()\r\n    })\r\n\r\n    const store = useStore()\r\n    const router = useRouter()\r\n    const route = useRoute()\r\n\r\n    // 点击登录时,校验\r\n    const login = async (value) => {\r\n      // Form组件提供了一个 validate 函数作为整体表单校验，当是返回的是一个promise\r\n      const valid = await formData.value.validate()\r\n      // console.log(valid)\r\n      if (valid) {\r\n        let data = null\r\n        // 1,准备 api接口,调用api获取数据\r\n        // 2.成功: 存储用户信息 + 跳转至来源页面或者首页 + 消息提示\r\n        // 3.失败:消息提示\r\n        try {\r\n          if (!isMsgLogin.value) {\r\n          // 账号密码登录\r\n            data = await userAccountLogin({ account: form.account, password: form.password })\r\n          } else {\r\n            // 短信登录\r\n            data = await userMobileLogin(form)\r\n          }\r\n          // 存储用户信息----\r\n          const { id, account, nickname, avatar, token, mobile } = data.result\r\n          // console.log('id, account, nickname, avatar, token, mobile:', id, account, nickname, avatar, token, mobile)\r\n          store.commit('user/setUser', { id, account, nickname, avatar, token, mobile })\r\n          // 合并购物车操作\r\n          store.dispatch('cart/mergeLocalCart').then(() => {\r\n            // 提示\r\n            Message({ type: 'success', text: '登录成功' })\r\n            // 跳转至来源页面或者首页\r\n            router.push(route.query.redirectUrl || './')\r\n          })\r\n        } catch (e) {\r\n          Message({ type: 'error', text: '登录失败' })\r\n          // Message({ type: 'error', text: error.response.data.message || '登录失败' })\r\n        }\r\n      }\r\n\r\n      // Message({ text: '账号密码不正确,请重试!', type: 'error' })\r\n    }\r\n\r\n    // pause 暂停 resume 开始\r\n    // useIntervalFn(回调函数,执行间隔,是否立即开启)\r\n    const { pause, resume } = useIntervalFn(() => {\r\n      time.value--\r\n      // 秒数 小于等于0,停止定时器\r\n      if (time.value <= 0) {\r\n        pause()\r\n      }\r\n    }, 1000, false)\r\n    // 销毁定时器\r\n    onMounted(() => {\r\n      pause()\r\n    })\r\n    // 倒计时标识\r\n    const time = ref(0)\r\n    // 发送验证码 方法\r\n    const send = async () => {\r\n      // 拿到 当前手机号 进行验证\r\n      const valid = mySchema.mobile(form.mobile)\r\n      if (valid === true) { // 通过验证\r\n        // 没有倒计时才可以发送\r\n        if (time.value === 0) {\r\n          await userMobileLoginMsg(form.mobile)\r\n          Message({ type: 'success', text: '发送成功' }) // 提示信息\r\n          time.value = 60\r\n          resume()\r\n        }\r\n      } else {\r\n        // 失败,使用vee的错误函数显示错误信息 setFieldError(字段,错误信息)\r\n        formData.value.setFieldError('mobile', valid)\r\n      }\r\n    }\r\n    return { isMsgLogin, form, schema: mySchema, formData, login, send, time }\r\n  }\r\n  // ,\r\n  // created () {\r\n  //   this.$message({ text: '账号密码不正确,请重试!', type: 'error' })\r\n  // }\r\n}\r\n</script>\r\n<style scoped lang=\"less\">\r\n// 账号容器\r\n.account-box {\r\n  .toggle {\r\n    padding: 15px 40px;\r\n    text-align: right;\r\n    a {\r\n      color: @xtxColor;\r\n      i {\r\n        font-size: 14px;\r\n      }\r\n    }\r\n  }\r\n  .form {\r\n    padding: 0 40px;\r\n    &-item {\r\n      margin-bottom: 28px;\r\n      .input {\r\n        position: relative;\r\n        height: 36px;\r\n        > i {\r\n          width: 34px;\r\n          height: 34px;\r\n          background: #cfcdcd;\r\n          color: #fff;\r\n          position: absolute;\r\n          left: 1px;\r\n          top: 1px;\r\n          text-align: center;\r\n          line-height: 34px;\r\n          font-size: 18px;\r\n        }\r\n        input {\r\n          padding-left: 44px;\r\n          border: 1px solid #cfcdcd;\r\n          height: 36px;\r\n          line-height: 36px;\r\n          width: 100%;\r\n          &.error {\r\n            border-color: @priceColor;\r\n          }\r\n          &.active,&:focus {\r\n            border-color: @xtxColor;\r\n          }\r\n        }\r\n        .code {\r\n          position: absolute;\r\n          right: 1px;\r\n          top: 1px;\r\n          text-align: center;\r\n          line-height: 34px;\r\n          font-size: 14px;\r\n          background: #f5f5f5;\r\n          color: #666;\r\n          width: 90px;\r\n          height: 34px;\r\n          cursor: pointer;\r\n        }\r\n      }\r\n      > .error {\r\n        position: absolute;\r\n        font-size: 12px;\r\n        line-height: 28px;\r\n        color: @priceColor;\r\n        i {\r\n          font-size: 14px;\r\n          margin-right: 2px;\r\n        }\r\n      }\r\n    }\r\n    .agree {\r\n      a {\r\n        color: #069;\r\n      }\r\n    }\r\n    .btn {\r\n      display: block;\r\n      width: 100%;\r\n      height: 40px;\r\n      color: #fff;\r\n      text-align: center;\r\n      line-height: 40px;\r\n      background: @xtxColor;\r\n      &.disabled {\r\n        background: #cfcdcd;\r\n      }\r\n    }\r\n  }\r\n  .action {\r\n    padding: 20px 40px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    .url {\r\n      a {\r\n        color: #999;\r\n        margin-left: 10px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./login-form.vue?vue&type=template&id=4cc4d142&scoped=true\"\nimport script from \"./login-form.vue?vue&type=script&lang=js\"\nexport * from \"./login-form.vue?vue&type=script&lang=js\"\n\nimport \"./login-form.vue?vue&type=style&index=0&id=4cc4d142&scoped=true&lang=less\"\n\nimport exportComponent from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\erabbit-pc-vue-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4cc4d142\"]])\n\nexport default __exports__","import { render } from \"./index.vue?vue&type=template&id=9f652fc4&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=9f652fc4&scoped=true&lang=less\"\n\nimport exportComponent from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\erabbit-pc-vue-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-9f652fc4\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","src","_imports_0","alt","href","_hoisted_4","_hoisted_5","_createVNode","_component_LoginHeader","_hoisted_1","_hoisted_2","onClick","$setup","active","_createBlock","_component_LoginForm","key","_createElementBlock","_hoisted_3","_component_LoginFooter","_component_Form","ref","autocomplete","errors","_Fragment","_hoisted_15","_hoisted_16","_hoisted_17","_component_Field","error","mobile","name","type","placeholder","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","code","_hoisted_23","_hoisted_24","_hoisted_6","_hoisted_7","account","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","password","_hoisted_13","_hoisted_14","_hoisted_25","_hoisted_26","as","isAgree","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","components","Form","Field","setup","isMsgLogin","form","reactive","mySchema","schema","formData","watch","async","value","resetForm","store","useStore","router","useRouter","route","useRoute","login","valid","validate","data","userMobileLogin","userAccountLogin","id","nickname","avatar","token","result","commit","dispatch","then","Message","text","push","query","redirectUrl","e","pause","resume","useIntervalFn","time","onMounted","send","userMobileLoginMsg","setFieldError","__exports__","LoginHeader","LoginFooter","LoginForm","activeName","render"],"sourceRoot":""}