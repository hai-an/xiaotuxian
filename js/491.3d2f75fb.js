"use strict";(self["webpackChunkerabbit_pc_vue_project"]=self["webpackChunkerabbit_pc_vue_project"]||[]).push([[491],{7535:function(e,t,s){s.d(t,{KB:function(){return v},L8:function(){return c},LV:function(){return n},Nc:function(){return m},Nv:function(){return p},RA:function(){return a},Yb:function(){return i},a_:function(){return r},li:function(){return o},sl:function(){return u},y$:function(){return d}});var l=s(4471);const a=()=>(0,l.Z)("/member/order/pre","get"),d=e=>(0,l.Z)("/member/address","post",e),i=e=>(0,l.Z)("/member/address","put",e),n=e=>(0,l.Z)("/member/order","post",e),o=e=>(0,l.Z)(`/member/order/repurchase/${e}`,"get"),r=e=>(0,l.Z)("/member/order/"+e,"get"),c=({page:e=1,pageSize:t=10,orderState:s=0})=>(0,l.Z)("/member/order","get",{page:e,pageSize:t,orderState:s}),u=({orderId:e,cancelReason:t})=>(0,l.Z)(`/member/order/${e}/cancel`,"put",{cancelReason:t}),p=e=>(0,l.Z)("/member/order","delete",{ids:e}),m=e=>(0,l.Z)(`/member/order/${e}/receipt`,"put"),v=e=>(0,l.Z)(`/member/order/${e}/logistics`,"get")},491:function(e,t,s){s.r(t),s.d(t,{default:function(){return we}});var l=s(3396),a=s(7139);const d=e=>((0,l.dD)("data-v-0d24182e"),e=e(),(0,l.Cn)(),e),i={class:"xtx-pay-checkout-page"},n={class:"container"},o={key:0,class:"wrapper"},r=d((()=>(0,l._)("h3",{class:"box-title"},"收货地址",-1))),c={class:"box-body"},u=d((()=>(0,l._)("h3",{class:"box-title"},"商品信息",-1))),p={class:"box-body"},m={class:"goods"},v=d((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",{width:"520"},"商品信息"),(0,l._)("th",{width:"170"},"单价"),(0,l._)("th",{width:"170"},"数量"),(0,l._)("th",{width:"170"},"小计"),(0,l._)("th",{width:"170"},"实付")])],-1))),_={href:"javascript:;",class:"info"},f=["src"],h={class:"right"},b=(0,l.uE)('<h3 class="box-title" data-v-0d24182e>配送时间</h3><div class="box-body" data-v-0d24182e><a class="my-btn active" href="javascript:;" data-v-0d24182e>不限送货时间：周一至周日</a><a class="my-btn" href="javascript:;" data-v-0d24182e>工作日送货：周一至周五</a><a class="my-btn" href="javascript:;" data-v-0d24182e>双休日、假日送货：周六至周日</a></div><h3 class="box-title" data-v-0d24182e>支付方式</h3><div class="box-body" data-v-0d24182e><a class="my-btn active" href="javascript:;" data-v-0d24182e>在线支付</a><a class="my-btn" href="javascript:;" data-v-0d24182e>货到付款</a><span style="color:#999;" data-v-0d24182e>货到付款需付5元手续费</span></div><h3 class="box-title" data-v-0d24182e>金额明细</h3>',5),g={class:"box-body"},y={class:"total"},k=d((()=>(0,l._)("dt",null,"商品件数：",-1))),w=d((()=>(0,l._)("dt",null,"商品总价：",-1))),x=d((()=>(0,l._)("dt",null,[(0,l.Uk)("运"),(0,l._)("i"),(0,l.Uk)("费：")],-1))),D=d((()=>(0,l._)("dt",null,"应付总额：",-1))),C={class:"price"},A={class:"submit"};function U(e,t,s,d,U,I){const z=(0,l.up)("XtxBreadItem"),Z=(0,l.up)("XtxBread"),W=(0,l.up)("CheckoutAddress"),j=(0,l.up)("XtxButton");return(0,l.wg)(),(0,l.iD)("div",i,[(0,l._)("div",n,[(0,l.Wm)(Z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(z,{to:"/"},{default:(0,l.w5)((()=>[(0,l.Uk)("首页")])),_:1}),(0,l.Wm)(z,{to:"/cart"},{default:(0,l.w5)((()=>[(0,l.Uk)("购物车")])),_:1}),(0,l.Wm)(z,null,{default:(0,l.w5)((()=>[(0,l.Uk)("填写订单")])),_:1})])),_:1}),d.checkoutInfo?((0,l.wg)(),(0,l.iD)("div",o,[r,(0,l._)("div",c,[(0,l.Wm)(W,{onChange:d.changeAddress,list:d.checkoutInfo.userAddresses},null,8,["onChange","list"])]),u,(0,l._)("div",p,[(0,l._)("table",m,[v,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(d.checkoutInfo.goods,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e.id},[(0,l._)("td",null,[(0,l._)("a",_,[(0,l._)("img",{src:e.picture,alt:""},null,8,f),(0,l._)("div",h,[(0,l._)("p",null,(0,a.zw)(e.name),1),(0,l._)("p",null,(0,a.zw)(e.attrsText),1)])])]),(0,l._)("td",null,"¥"+(0,a.zw)(e.price),1),(0,l._)("td",null,(0,a.zw)(e.count),1),(0,l._)("td",null,"¥"+(0,a.zw)(e.totalPrice),1),(0,l._)("td",null,"¥"+(0,a.zw)(e.totalPayPrice),1)])))),128))])])]),b,(0,l._)("div",g,[(0,l._)("div",y,[(0,l._)("dl",null,[k,(0,l._)("dd",null,(0,a.zw)(d.checkoutInfo.summary.goodsCount)+"件",1)]),(0,l._)("dl",null,[w,(0,l._)("dd",null,"¥"+(0,a.zw)(d.checkoutInfo.summary.totalPrice),1)]),(0,l._)("dl",null,[x,(0,l._)("dd",null,"¥"+(0,a.zw)(d.checkoutInfo.summary.postFee),1)]),(0,l._)("dl",null,[D,(0,l._)("dd",C,"¥"+(0,a.zw)(d.checkoutInfo.summary.totalPayPrice),1)])])]),(0,l._)("div",A,[(0,l.Wm)(j,{onClick:d.submitOrderFn,type:"primary"},{default:(0,l.w5)((()=>[(0,l.Uk)("提交订单")])),_:1},8,["onClick"])])])):(0,l.kq)("",!0)])])}s(7658);var I=s(4870);const z=e=>((0,l.dD)("data-v-29ad0619"),e=e(),(0,l.Cn)(),e),Z={class:"checkout-address"},W={key:0,class:"none"},j={key:1,class:"text"},$=z((()=>(0,l._)("span",null,[(0,l.Uk)("收"),(0,l._)("i"),(0,l.Uk)("货"),(0,l._)("i"),(0,l.Uk)("人：")],-1))),H=z((()=>(0,l._)("span",null,"联系方式：",-1))),L=z((()=>(0,l._)("span",null,"收货地址：",-1))),q={class:"action"},E=["onClick"],P=z((()=>(0,l._)("span",null,[(0,l.Uk)("收"),(0,l._)("i"),(0,l.Uk)("货"),(0,l._)("i"),(0,l.Uk)("人：")],-1))),X=z((()=>(0,l._)("span",null,"联系方式：",-1))),F=z((()=>(0,l._)("span",null,"收货地址：",-1)));function S(e,t,s,d,i,n){const o=(0,l.up)("XtxButton"),r=(0,l.up)("XtxDialog"),c=(0,l.up)("AddressEdit");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",Z,[d.showAddress?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",W,"您需要先添加收货地址才可提交订单。")),d.showAddress?((0,l.wg)(),(0,l.iD)("div",j,[(0,l._)("ul",null,[(0,l._)("li",null,[$,(0,l.Uk)((0,a.zw)(d.showAddress.receiver),1)]),(0,l._)("li",null,[H,(0,l.Uk)((0,a.zw)(d.showAddress.contact.replace(/^(\d{3})\d{4}(\d{4})$/,"$1****$2")),1)]),(0,l._)("li",null,[L,(0,l.Uk)((0,a.zw)(d.showAddress.fullLocation.replace(/ /g,"")+d.showAddress.address),1)])]),d.showAddress?((0,l.wg)(),(0,l.iD)("a",{key:0,onClick:t[0]||(t[0]=e=>d.openAddressEdit(d.showAddress)),href:"javascript:;"},"修改地址")):(0,l.kq)("",!0)])):(0,l.kq)("",!0),(0,l._)("div",q,[(0,l.Wm)(o,{onClick:t[1]||(t[1]=e=>d.openDialogFn()),class:"btn"},{default:(0,l.w5)((()=>[(0,l.Uk)("切换地址")])),_:1}),(0,l.Wm)(o,{onClick:t[2]||(t[2]=e=>d.openAddressEdit({})),class:"btn"},{default:(0,l.w5)((()=>[(0,l.Uk)("添加地址")])),_:1})])]),(0,l.Wm)(r,{title:"切换收货地址",visible:d.visibleDialog,"onUpdate:visible":t[5]||(t[5]=e=>d.visibleDialog=e)},{footer:(0,l.w5)((()=>[(0,l.Wm)(o,{onClick:t[3]||(t[3]=e=>d.visibleDialog=!1),type:"gray",style:{"margin-right":"20px"}},{default:(0,l.w5)((()=>[(0,l.Uk)("取消")])),_:1}),(0,l.Wm)(o,{onClick:t[4]||(t[4]=e=>d.confirmAddressFn()),type:"primary"},{default:(0,l.w5)((()=>[(0,l.Uk)("确认")])),_:1})])),default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(s.list,(e=>((0,l.wg)(),(0,l.iD)("div",{class:(0,a.C_)(["text item",{active:d.selectedAddress&&d.selectedAddress.id===e.id}]),key:e.id,onClick:()=>{d.selectedAddress=e,d.confirmAddressFn()}},[(0,l._)("ul",null,[(0,l._)("li",null,[P,(0,l.Uk)((0,a.zw)(e.receiver),1)]),(0,l._)("li",null,[X,(0,l.Uk)((0,a.zw)(e.contact.replace(/^(\d{3})\d{4}(\d{4})$/,"$1****$2")),1)]),(0,l._)("li",null,[F,(0,l.Uk)((0,a.zw)(e.fullLocation.replace(/ /g,"")+e.address),1)])])],10,E)))),128))])),_:1},8,["visible"]),(0,l.Wm)(c,{ref:"addressEdit",onSubmitAddress:d.successHandler},null,8,["onSubmitAddress"])],64)}s(541);var T=s(9242);const V=e=>((0,l.dD)("data-v-5eb9ed98"),e=e(),(0,l.Cn)(),e),B={class:"xtx-form"},Y={class:"xtx-form-item"},N=V((()=>(0,l._)("div",{class:"label"},"收货人：",-1))),O={class:"field"},R={class:"xtx-form-item"},K=V((()=>(0,l._)("div",{class:"label"},"手机号：",-1))),J={class:"field"},M={class:"xtx-form-item"},G=V((()=>(0,l._)("div",{class:"label"},"地区：",-1))),Q={class:"field"},ee={class:"xtx-form-item"},te=V((()=>(0,l._)("div",{class:"label"},"详细地址：",-1))),se={class:"field"},le={class:"xtx-form-item"},ae=V((()=>(0,l._)("div",{class:"label"},"邮政编码：",-1))),de={class:"field"},ie={class:"xtx-form-item"},ne=V((()=>(0,l._)("div",{class:"label"},"地址标签：",-1))),oe={class:"field"};function re(e,t,s,a,d,i){const n=(0,l.up)("XtxCity"),o=(0,l.up)("XtxButton"),r=(0,l.up)("XtxDialog");return(0,l.wg)(),(0,l.j4)(r,{title:(a.formData.id?"编辑":"添加")+"收货地址",visible:a.visibleDialog,"onUpdate:visible":t[7]||(t[7]=e=>a.visibleDialog=e)},{footer:(0,l.w5)((()=>[(0,l.Wm)(o,{onClick:t[5]||(t[5]=e=>a.visibleDialog=!1),type:"gray",style:{"margin-right":"20px"}},{default:(0,l.w5)((()=>[(0,l.Uk)("取消")])),_:1}),(0,l.Wm)(o,{onClick:t[6]||(t[6]=e=>a.submit()),type:"primary"},{default:(0,l.w5)((()=>[(0,l.Uk)("确认")])),_:1})])),default:(0,l.w5)((()=>[(0,l._)("div",B,[(0,l._)("div",Y,[N,(0,l._)("div",O,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.formData.receiver=e),class:"input",placeholder:"请输入收货人"},null,512),[[T.nr,a.formData.receiver]])])]),(0,l._)("div",R,[K,(0,l._)("div",J,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.formData.contact=e),class:"input",placeholder:"请输入手机号"},null,512),[[T.nr,a.formData.contact]])])]),(0,l._)("div",M,[G,(0,l._)("div",Q,[(0,l.Wm)(n,{onChange:a.changeCity,fullLocation:a.formData.fullLocation},null,8,["onChange","fullLocation"])])]),(0,l._)("div",ee,[te,(0,l._)("div",se,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>a.formData.address=e),class:"input",placeholder:"请输入详细地址"},null,512),[[T.nr,a.formData.address]])])]),(0,l._)("div",le,[ae,(0,l._)("div",de,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>a.formData.postalCode=e),class:"input",placeholder:"请输入邮政编码"},null,512),[[T.nr,a.formData.postalCode]])])]),(0,l._)("div",ie,[ne,(0,l._)("div",oe,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>a.formData.addressTags=e),class:"input",placeholder:"请输入地址标签，逗号分隔"},null,512),[[T.nr,a.formData.addressTags]])])])])])),_:1},8,["title","visible"])}var ce=s(7535),ue=s(8391),pe={name:"AddressEdit",setup(e,{emit:t}){const s=(0,I.iH)(!1),l=e=>{if(s.value=!0,e.id)for(const t in e)a[t]=e[t];else for(const t in a)"isDefault"===t?a.isDefault=1:a[t]=null},a=(0,I.qj)({id:"",receiver:"",contact:"",provinceCode:"",cityCode:"",countyCode:"",address:"",postalCode:"",addressTags:"",isDefault:1,fullLocation:""}),d=e=>{a.provinceCode=e.provinceCode,a.cityCode=e.cityCode,a.countyCode=e.countyCode,a.fullLocation=e.fullLocation},i=()=>{a.id?(0,ce.Yb)(a).then((e=>{(0,ue.Z)({text:"修改收货地址成功",type:"success"}),s.value=!1,t("submit-address",a)})):(0,ce.y$)(a).then((e=>{a.id=e.result.id,(0,ue.Z)({text:"添加收货地址成功",type:"success"}),s.value=!1,t("submit-address",a)}))};return{visibleDialog:s,openDialog:l,changeCity:d,formData:a,submit:i}}},me=s(89);const ve=(0,me.Z)(pe,[["render",re],["__scopeId","data-v-5eb9ed98"]]);var _e=ve,fe={name:"CheckoutAddress",props:{list:{type:Array,default:()=>[]}},components:{AddressEdit:_e},emits:["change"],setup(e,{emit:t}){const s=(0,I.iH)(null);if(0!==e.list.length){const t=e.list.find((e=>1===e.isDefault));s.value=t||e.list[0]}const l=(0,I.iH)(!1);t("change",s.value?.id);const a=(0,I.iH)(null),d=()=>{s.value=a.value,t("change",s.value?.id),l.value=!1},i=()=>{l.value=!0,a.value=null},n=(0,I.iH)(null),o=e=>{n.value.openDialog(e)},r=t=>{const s=e.list.find((e=>e.id===t.id));if(console.log("editAddress",s),s)for(const e in s)s[e]=t[e];else e.list.unshift(JSON.parse(JSON.stringify(t)))};return{showAddress:s,visibleDialog:l,openDialogFn:i,confirmAddressFn:d,selectedAddress:a,openAddressEdit:o,addressEdit:n,successHandler:r}}};const he=(0,me.Z)(fe,[["render",S],["__scopeId","data-v-29ad0619"]]);var be=he,ge=s(2483),ye={name:"XtxPayCheckoutPage",components:{CheckoutAddress:be},emits:["change"],setup(){const e=(0,I.iH)(null),t=(0,ge.yj)();t.query.orderId?(0,ce.li)(t.query.orderId).then((t=>{e.value=t.result,s.goods=e.value.goods.map((({skuId:e,count:t})=>({skuId:e,count:t})))})):(0,ce.RA)().then((t=>{e.value=t.result,s.goods=e.value.goods.map((({skuId:e,count:t})=>({skuId:e,count:t})))}));const s=(0,I.qj)({addressId:null,deliveryTimeType:1,payType:1,buyerMessage:"",goods:[]}),l=e=>{s.addressId=e},a=(0,ge.tv)(),d=()=>{if(!s.addressId)return(0,ue.Z)({text:"亲,请设置收货地址后,再下单!"});(0,ce.LV)(s).then((e=>{(0,ue.Z)({text:"订单提交成功！请尽快完成支付!",type:"success"}),a.push({path:"/member/pay",query:{orderId:e.result.id}})}))};return{checkoutInfo:e,changeAddress:l,submitOrderFn:d,requestParams:s}}};const ke=(0,me.Z)(ye,[["render",U],["__scopeId","data-v-0d24182e"]]);var we=ke}}]);
//# sourceMappingURL=491.3d2f75fb.js.map