"use strict";(self["webpackChunkerabbit_pc_vue_project"]=self["webpackChunkerabbit_pc_vue_project"]||[]).push([[439],{1664:function(e,a,o){o.r(a),o.d(a,{default:function(){return re}});var c=o(3396),s=o(7139),l=o(3947);const n=e=>((0,c.dD)("data-v-9f652fc4"),e=e(),(0,c.Cn)(),e),i={class:"login-section"},t={class:"wrapper"},r={key:1,class:"qrcode-box"},u=n((()=>(0,c._)("img",{src:l,alt:""},null,-1))),d=n((()=>(0,c._)("p",null,[(0,c.Uk)("打开 "),(0,c._)("a",{href:"javascript:;"},"小兔鲜App"),(0,c.Uk)(" 扫码登录")],-1))),m=[u,d];function p(e,a,o,l,n,u){const d=(0,c.up)("LoginHeader"),p=(0,c.up)("LoginForm"),v=(0,c.up)("LoginFooter");return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c.Wm)(d,null,{default:(0,c.w5)((()=>[(0,c.Uk)("欢迎登录")])),_:1}),(0,c._)("section",i,[(0,c._)("div",t,[(0,c._)("nav",null,[(0,c._)("a",{onClick:a[0]||(a[0]=e=>l.activeName="account"),class:(0,s.C_)({active:"account"===l.activeName}),href:"javascript:;"},"账户登录",2),(0,c._)("a",{onClick:a[1]||(a[1]=e=>l.activeName="qrcode"),class:(0,s.C_)({active:"qrcode"===l.activeName}),href:"javascript:;"},"扫码登录",2)]),"account"===l.activeName?((0,c.wg)(),(0,c.j4)(p,{key:0})):(0,c.kq)("",!0),"qrcode"===l.activeName?((0,c.wg)(),(0,c.iD)("div",r,m)):(0,c.kq)("",!0)])]),(0,c.Wm)(v)],64)}var v=o(7442),g=o(2874);const f=e=>((0,c.dD)("data-v-4cc4d142"),e=e(),(0,c.Cn)(),e),_={class:"account-box"},w={class:"toggle"},k=f((()=>(0,c._)("i",{class:"iconfont icon-user"},null,-1))),h=f((()=>(0,c._)("i",{class:"iconfont icon-msg"},null,-1))),b={class:"form-item"},y={class:"input"},C=f((()=>(0,c._)("i",{class:"iconfont icon-user"},null,-1))),q={key:0,class:"error"},U=f((()=>(0,c._)("i",{class:"iconfont icon-warning"},null,-1))),j={class:"form-item"},F={class:"input"},D=f((()=>(0,c._)("i",{class:"iconfont icon-lock"},null,-1))),V={key:0,class:"error"},L=f((()=>(0,c._)("i",{class:"iconfont icon-warning"},null,-1))),Z={class:"form-item"},x={class:"input"},A=f((()=>(0,c._)("i",{class:"iconfont icon-user"},null,-1))),H={key:0,class:"error"},z=f((()=>(0,c._)("i",{class:"iconfont icon-warning"},null,-1))),N={class:"form-item"},W={class:"input"},M=f((()=>(0,c._)("i",{class:"iconfont icon-code"},null,-1))),E={key:0,class:"error"},Y=f((()=>(0,c._)("i",{class:"iconfont icon-warning"},null,-1))),R={class:"form-item"},I={class:"agree"},P=f((()=>(0,c._)("span",null,"我已同意",-1))),X=f((()=>(0,c._)("a",{href:"javascript:;"},"《隐私条款》",-1))),$=f((()=>(0,c._)("span",null,"和",-1))),B=f((()=>(0,c._)("a",{href:"javascript:;"},"《服务条款》",-1))),G=(0,c.uE)('<div class="action" data-v-4cc4d142><a href="https://graph.qq.com/oauth2.0/authorize?client_id=100556005&amp;response_type=token&amp;scope=all&amp;redirect_uri=http%3A%2F%2Fwww.corho.com%3A8080%2F%23%2Flogin%2Fcallback" data-v-4cc4d142><img src="https://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/Connect_logo_7.png" alt="" data-v-4cc4d142></a><div class="url" data-v-4cc4d142><a href="javascript:;" data-v-4cc4d142>忘记密码</a><a href="javascript:;" data-v-4cc4d142>免费注册</a></div></div>',1);function J(e,a,o,l,n,i){const t=(0,c.up)("Field"),r=(0,c.up)("Form");return(0,c.wg)(),(0,c.iD)("div",_,[(0,c._)("div",w,[l.isMsgLogin?((0,c.wg)(),(0,c.iD)("a",{key:0,onClick:a[0]||(a[0]=e=>l.isMsgLogin=!1),href:"javascript:;"},[k,(0,c.Uk)(" 使用账号登录 ")])):((0,c.wg)(),(0,c.iD)("a",{key:1,onClick:a[1]||(a[1]=e=>l.isMsgLogin=!0),href:"javascript:;"},[h,(0,c.Uk)(" 使用短信登录 ")]))]),(0,c.Wm)(r,{ref:"formData",class:"form","validation-schema":l.schema,autocomplete:"off"},{default:(0,c.w5)((({errors:e})=>[l.isMsgLogin?((0,c.wg)(),(0,c.iD)(c.HY,{key:1},[(0,c._)("div",Z,[(0,c._)("div",x,[A,(0,c.Wm)(t,{class:(0,s.C_)({error:e.mobile}),name:"mobile",modelValue:l.form.mobile,"onUpdate:modelValue":a[4]||(a[4]=e=>l.form.mobile=e),type:"text",placeholder:"请输入手机号"},null,8,["class","modelValue"])]),e.mobile?((0,c.wg)(),(0,c.iD)("div",H,[z,(0,c.Uk)((0,s.zw)(e.mobile),1)])):(0,c.kq)("",!0)]),(0,c._)("div",N,[(0,c._)("div",W,[M,(0,c.Wm)(t,{class:(0,s.C_)({error:e.code}),name:"code",modelValue:l.form.code,"onUpdate:modelValue":a[5]||(a[5]=e=>l.form.code=e),type:"text",placeholder:"请输入验证码"},null,8,["class","modelValue"]),(0,c._)("span",{onClick:a[6]||(a[6]=e=>l.send()),class:"code"},(0,s.zw)(0===l.time?"发送验证码":`${l.time}秒后点击`),1)]),e.code?((0,c.wg)(),(0,c.iD)("div",E,[Y,(0,c.Uk)((0,s.zw)(e.code),1)])):(0,c.kq)("",!0)])],64)):((0,c.wg)(),(0,c.iD)(c.HY,{key:0},[(0,c._)("div",b,[(0,c._)("div",y,[C,(0,c.Wm)(t,{class:(0,s.C_)({error:e.account}),modelValue:l.form.account,"onUpdate:modelValue":a[2]||(a[2]=e=>l.form.account=e),name:"account",type:"text",placeholder:"请输入用户名或手机号"},null,8,["class","modelValue"])]),e.account?((0,c.wg)(),(0,c.iD)("div",q,[U,(0,c.Uk)((0,s.zw)(e.account),1)])):(0,c.kq)("",!0)]),(0,c._)("div",j,[(0,c._)("div",F,[D,(0,c.Wm)(t,{class:(0,s.C_)({error:e.password}),name:"password",modelValue:l.form.password,"onUpdate:modelValue":a[3]||(a[3]=e=>l.form.password=e),type:"password",placeholder:"请输入密码"},null,8,["class","modelValue"])]),e.password?((0,c.wg)(),(0,c.iD)("div",V,[L,(0,c.Uk)((0,s.zw)(e.password),1)])):(0,c.kq)("",!0)])],64)),(0,c._)("div",R,[(0,c._)("div",I,[(0,c.Wm)(t,{as:"XtxCheckbox",name:"isAgree",modelValue:l.form.isAgree,"onUpdate:modelValue":a[7]||(a[7]=e=>l.form.isAgree=e)},null,8,["modelValue"]),P,X,$,B])]),(0,c._)("a",{onClick:a[8]||(a[8]=e=>l.login()),href:"javascript:;",class:"btn"},"登录")])),_:1},8,["validation-schema"]),G])}o(7658);var K=o(4870),O=o(2900),Q=o(5708),S=o(2025),T=o(8391),ee=o(65),ae=o(2483),oe=o(3430),ce={name:"LoginForm",components:{Form:Q.l0,Field:Q.gN},setup(){const e=(0,K.iH)(!1),a=(0,K.qj)({isAgree:!0,account:null,password:null,mobile:null,code:null}),o={account:S.Z.account,password:S.Z.password,mobile:S.Z.mobile,code:S.Z.code,isAgree:S.Z.isAgree},s=(0,K.iH)(null);(0,c.YP)(e,(async()=>{a.isAgree=!0,a.account=null,a.password=null,a.mobile=null,a.code=null,s.value.resetForm()}));const l=(0,ee.oR)(),n=(0,ae.tv)(),i=(0,ae.yj)(),t=async o=>{const c=await s.value.validate();if(c){let o=null;try{o=e.value?await(0,O.EE)(a):await(0,O.Ak)({account:a.account,password:a.password});const{id:c,account:s,nickname:t,avatar:r,token:u,mobile:d}=o.result;l.commit("user/setUser",{id:c,account:s,nickname:t,avatar:r,token:u,mobile:d}),l.dispatch("cart/mergeLocalCart").then((()=>{(0,T.Z)({type:"success",text:"登录成功"}),n.push(i.query.redirectUrl||"./")}))}catch(t){(0,T.Z)({type:"error",text:"登录失败"})}}},{pause:r,resume:u}=(0,oe.Zv)((()=>{d.value--,d.value<=0&&r()}),1e3,!1);(0,c.bv)((()=>{r()}));const d=(0,K.iH)(0),m=async()=>{const e=o.mobile(a.mobile);!0===e?0===d.value&&(await(0,O.MM)(a.mobile),(0,T.Z)({type:"success",text:"发送成功"}),d.value=60,u()):s.value.setFieldError("mobile",e)};return{isMsgLogin:e,form:a,schema:o,formData:s,login:t,send:m,time:d}}},se=o(89);const le=(0,se.Z)(ce,[["render",J],["__scopeId","data-v-4cc4d142"]]);var ne=le,ie={name:"PageLogin",components:{LoginHeader:v.Z,LoginFooter:g.Z,LoginForm:ne},setup(){const e=(0,K.iH)("account"),a=(0,ee.oR)(),o=(0,ae.yj)();return a.commit("user/setRedirectUrl",o.query.redirectUrl),{activeName:e}}};const te=(0,se.Z)(ie,[["render",p],["__scopeId","data-v-9f652fc4"]]);var re=te},3947:function(e,a,o){e.exports=o.p+"img/qrcode.f8ff6896.jpg"}}]);
//# sourceMappingURL=439.70f08a86.js.map